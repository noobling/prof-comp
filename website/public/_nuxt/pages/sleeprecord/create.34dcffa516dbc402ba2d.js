webpackJsonp([7],{Rl8h:function(t,e,a){"use strict";e.a={methods:{timeOfDayArr:function(){for(var t=0,e=0,a=[];24!=e;){for(;60!=t;){var r=null,o=e>11?" PM":" AM",i=t.toString().padStart(2,"0");if(0==e)r="12:"+i+o;else if(e>12){r=(e-12).toString().padStart(2,"0")+":"+i+o}else{r=e.toString().padStart(2,"0")+":"+i+o}var s=r.replace(/\s/g,"").replace(":00","").replace(":","").toLowerCase();s="0"===s[0]?s.substring(1):s;var n={time:r,value:e.toString().padStart(2,"0")+":"+i,quickFindText:s};a.push(n),t+=15}e+=1,t=0}return a.reverse()},timeOfDayArrLong:function(){for(var t=0,e=0,a=[];24!=e;){for(;60!=t;){var r=null,o=e>11?" PM":" AM",i=t.toString().padStart(2,"0");if(0==e)r="12:"+i+o;else if(e>12){r=(e-12).toString().padStart(2,"0")+":"+i+o}else{r=e.toString().padStart(2,"0")+":"+i+o}var s=r.replace(/\s/g,"").replace(":00","").replace(":","").toLowerCase();s="0"===s[0]?s.substring(1):s;var n={time:r,value:e.toString().padStart(2,"0")+":"+i,quickFindText:s};a.push(n),t+=1}e+=1,t=0}return a.reverse()},timeDurations:function(){for(var t=15,e=0,a=[];24!=e;){for(;60!=t;){var r=e+(1===e?" hour ":" hours ")+t+" minutes",o={time:r,value:e.toString().padStart(2,"0")+":"+t.toString().padStart(2,"0"),quickFindText:r.replace(/\s/g,"")};a.push(o),t+=15}e+=1,t=0}return a}},data:function(){return{numbersList:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]}}}},"T+U2":function(t,e,a){var r=a("wFZK");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("76201283",r,!1,{sourceMap:!1})},cP0x:function(t,e,a){"use strict";var r=a("Xxa5"),o=a.n(r),i=a("exGp"),s=a.n(i),n=a("Dd8w"),l=a.n(n),c=a("mtWM"),u=a.n(c),m=a("NYxO"),d=a("Rl8h"),p=a("e7x4"),f=a.n(p);e.a={head:function(){return{title:"New Sleep Record"}},components:{},mixins:[d.a],created:function(){var t=this;if(this.$store.getters["auth/check"]){var e=new Date,a=e.getDate(),r=e.getMonth()+1,o=e.getFullYear();this.form.date=o+"-"+r.toString().padStart(2,"0")+"-"+a.toString().padStart(2,"0")}else f()({title:"Warning",text:"You need to login to view this page",type:"warning"}).then(function(e){t.$router.push("/login")});this.fetchData()},data:function(){return{requiredRule:[function(t){return 0==t||!!t||"Field is required"}],form:{medicines:[]},earlyWakeUp:!1,valid:!0,currentStep:1,toProcess:["timeTakenToSleepDuration","awakeningsTotalDuration","awakeningsFinalDuration","earlyWakeUpDuration","napDozeDuration","sleepDuration"]}},computed:l()({},Object(m.mapGetters)(["loading"]),{timeOfDays:function(){return this.timeOfDayArr()},timeDurationsArr:function(){return this.timeDurations()}}),watch:{},methods:{submit:function(){var t=s()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$refs.form.validate()){t.next=8;break}return this.processForm(),0===this.form.medicines.length&&delete this.form.medicines,t.next=5,u.a.post("/user/sleeprecord",this.form);case 5:e=t.sent,e.data,this.$router.push("/sleeprecord/user/"+this.$store.getters["auth/user"].id);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),nextStep:function(){this.$refs.form.validate()&&(this.currentStep+=1)},addMedicine:function(){this.form.medicines.push("")},processForm:function(){for(var t in this.toProcess)if(this.form[this.toProcess[t]]&&-1===this.form[this.toProcess[t]].indexOf(":")){var e=this.getCorrectDurationText(this.form[this.toProcess[t]]);this.form[this.toProcess[t]]=e.slice(0,2)+":"+e.slice(2)}},preProcessForm:function(){for(var t in this.toProcess)if(this.form[this.toProcess[t]]){var e=this.form[this.toProcess[t]];this.form[this.toProcess[t]]=e.split(":").join("")}},fetchData:function(){var t=s()(o.a.mark(function t(){var e,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("/sleeprecords/"+this.$store.getters["auth/user"].id+"/latest");case 2:e=t.sent,(a=e.data)&&(this.form=a,a.medicines||(this.form.medicines=[]),delete this.form.user,delete this.form.id,this.setCurrentDate(),this.preProcessForm());case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),setCurrentDate:function(){var t=new Date,e=t.getDate(),a=t.getMonth()+1,r=t.getFullYear();this.form.date=r+"-"+a.toString().padStart(2,"0")+"-"+e.toString().padStart(2,"0")},humanDurationText:function(t){if(t){var e=this.getCorrectDurationText(t);return e.substring(0,2)+" hour(s) "+e.substring(2)+" minute(s)"}return""},getCorrectDurationText:function(t){if(t){var e=t;return 1===t.length&&(e=t.padStart(2,"0")),e.padEnd(4,"0")}}}}},gg04:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("cP0x"),o=a("hlfc"),i=!1;var s=function(t){i||a("T+U2")},n=a("VU/8")(r.a,o.a,!1,s,"data-v-4d1596d4",null);n.options.__file="client/pages/sleeprecord/create.vue",e.default=n.exports},hlfc:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",[a("v-flex",{attrs:{xs12:"",sm10:"","offset-sm1":""}},[t.form?a("v-scale-transition",[a("v-card",[a("v-toolbar",{attrs:{card:""}},[a("v-btn",{attrs:{icon:"",to:"/home"}},[a("v-icon",[t._v("arrow_back")])],1),a("v-toolbar-title",{staticClass:"body-2"},[t._v("New Sleep Record")])],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:t.submit},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-stepper",{staticStyle:{"box-shadow":"none"},attrs:{vertical:""},model:{value:t.currentStep,callback:function(e){t.currentStep=e},expression:"currentStep"}},[a("v-stepper-step",{attrs:{step:"1",complete:t.currentStep>1},on:{click:function(e){t.currentStep=1}}},[a("span",{staticClass:"stepper-header",on:{click:function(e){t.currentStep=1}}},[t._v("Sleep Times")])]),1==t.currentStep?a("v-stepper-content",{attrs:{step:"1"}},[a("v-text-field",{attrs:{label:"Date of Sleep Record",required:"",rules:t.requiredRule,type:"date"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"What time did you get into bed?",required:"",rules:t.requiredRule,type:"time",hint:"hh:mm am|pm"},model:{value:t.form.timeGotIntoBed,callback:function(e){t.$set(t.form,"timeGotIntoBed",e)},expression:"form.timeGotIntoBed"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("What time did you get into bed?")])],1)],1),a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"What time did you try to go to sleep?",required:"",rules:t.requiredRule,type:"time"},model:{value:t.form.timeToTrySleep,callback:function(e){t.$set(t.form,"timeToTrySleep",e)},expression:"form.timeToTrySleep"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("What time did you try to go to sleep?")])],1)],1),a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"What time did you get out of bed for the day?",required:"",rules:t.requiredRule,type:"time"},model:{value:t.form.timeWokenUp,callback:function(e){t.$set(t.form,"timeWokenUp",e)},expression:"form.timeWokenUp"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("What time did you get out of bed for the day?")])],1)],1),a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"How long did it take you to fall asleep",rules:t.requiredRule,required:"",mask:"time",placeholder:"hh:mm",hint:t.humanDurationText(t.form.timeTakenToSleepDuration)},model:{value:t.form.timeTakenToSleepDuration,callback:function(e){t.$set(t.form,"timeTakenToSleepDuration",e)},expression:"form.timeTakenToSleepDuration"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("How long did it take you to fall asleep")])],1)],1),a("v-btn",{staticClass:"btn-spaced",attrs:{disabled:!t.valid,color:"primary"},on:{click:t.nextStep}},[t._v("Continue")])],1):t._e(),a("v-stepper-step",{attrs:{step:"2",complete:t.currentStep>2}},[a("span",{staticClass:"stepper-header",on:{click:function(e){t.currentStep=2}}},[t._v("Sleep Awakenings")])]),2==t.currentStep?a("v-stepper-content",{attrs:{step:"2"}},[a("div",{staticClass:"row"},[a("v-select",{attrs:{label:"How many times did you wake up, not counting your final awakening?",required:"",rules:t.requiredRule,items:t.numbersList},model:{value:t.form.awakeningsNumber,callback:function(e){t.$set(t.form,"awakeningsNumber",e)},expression:"form.awakeningsNumber"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("How many times did you wake up, not counting your final awakening?")])],1)],1),t.form.awakeningsNumber&&t.form.awakeningsNumber>0?a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"In total, how long did these awakenings last?",rules:t.requiredRule,required:"",hint:t.humanDurationText(t.form.awakeningsTotalDuration),placeholder:"hh:mm",mask:"time"},model:{value:t.form.awakeningsTotalDuration,callback:function(e){t.$set(t.form,"awakeningsTotalDuration",e)},expression:"form.awakeningsTotalDuration"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("In total, how long did these awakenings last?")])],1)],1):t._e(),t.form.awakeningsNumber&&t.form.awakeningsNumber>0?a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"What time was your final awakening?",required:"",rules:t.requiredRule,type:"time",hint:"hh:mm am|pm"},model:{value:t.form.awakeningsFinalTime,callback:function(e){t.$set(t.form,"awakeningsFinalTime",e)},expression:"form.awakeningsFinalTime"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("What time was your final awakening?")])],1)],1):t._e(),t.form.awakeningsNumber&&t.form.awakeningsNumber>0?a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"After your final awakening how long did you spend in bed trying to sleep?",rules:t.requiredRule,required:"",mask:"time",placeholder:"hh:mm",hint:t.humanDurationText(t.form.awakeningsFinalDuration)},model:{value:t.form.awakeningsFinalDuration,callback:function(e){t.$set(t.form,"awakeningsFinalDuration",e)},expression:"form.awakeningsFinalDuration"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("After your final awakening how long did you spend in bed trying to sleep?")])],1)],1):t._e(),a("div",{staticClass:"row"},[a("v-checkbox",{attrs:{label:"Did you wake up earlier than planned?",color:"primary"},model:{value:t.form.earlyWakeUp,callback:function(e){t.$set(t.form,"earlyWakeUp",e)},expression:"form.earlyWakeUp"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("Did you wake up earlier than planned?")])],1)],1),t.form.earlyWakeUp?a("v-text-field",{attrs:{label:"How much earlier?",rules:t.requiredRule,required:"",mask:"time",hint:t.humanDurationText(t.form.earlyWakeUpDuration),"aria-placeholder":"hh:mm"},model:{value:t.form.earlyWakeUpDuration,callback:function(e){t.$set(t.form,"earlyWakeUpDuration",e)},expression:"form.earlyWakeUpDuration"}}):t._e(),a("v-btn",{staticClass:"btn-spaced",attrs:{disabled:!t.valid,color:"primary"},on:{click:t.nextStep}},[t._v("Continue")])],1):t._e(),a("v-stepper-step",{attrs:{step:"3",complete:t.currentStep>3}},[a("span",{staticClass:"stepper-header",on:{click:function(e){t.currentStep=3}}},[t._v("Sleep Quality")])]),3==t.currentStep?a("v-stepper-content",{attrs:{step:"3"}},[a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"In total, how long did you sleep?",rules:t.requiredRule,required:"",mask:"time",placeholder:"hh:mm",hint:t.humanDurationText(t.form.sleepDuration)},model:{value:t.form.sleepDuration,callback:function(e){t.$set(t.form,"sleepDuration",e)},expression:"form.sleepDuration"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("In total, how long did you sleep?")])],1)],1),a("div",{staticClass:"row"},[a("v-select",{attrs:{label:"How would you rate the quality of your sleep",rules:t.requiredRule,items:["Very Poor","Poor","Fair","Good","Very good"]},model:{value:t.form.sleepQuality,callback:function(e){t.$set(t.form,"sleepQuality",e)},expression:"form.sleepQuality"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("How would you rate the quality of your sleep")])],1)],1),a("div",{staticClass:"row"},[a("v-select",{attrs:{rules:t.requiredRule,label:"How rested or refreshed did you feel when you woke-up for the day?",items:["Not at all","Slightly rested","Somewhat rested","Well-rested","Very well-rested"]},model:{value:t.form.feeling,callback:function(e){t.$set(t.form,"feeling",e)},expression:"form.feeling"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("How rested or refreshed did you feel when you woke-up for the day?")])],1)],1),a("div",{staticClass:"row"},[a("v-select",{attrs:{label:"How many times did you nap or doze?",items:t.numbersList,rules:t.requiredRule,required:""},model:{value:t.form.napDozeNum,callback:function(e){t.$set(t.form,"napDozeNum",e)},expression:"form.napDozeNum"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("How many times did you nap or doze?")])],1)],1),t.form.napDozeNum&&t.form.napDozeNum>0?a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"In total, how long did you nap or doze?",rules:t.requiredRule,required:"",mask:"time",placeholder:"hh:mm",hint:t.humanDurationText(t.form.napDozeDuration)},model:{value:t.form.napDozeDuration,callback:function(e){t.$set(t.form,"napDozeDuration",e)},expression:"form.napDozeDuration"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("In total, how long did you nap or doze?")])],1)],1):t._e(),a("v-btn",{staticClass:"btn-spaced",attrs:{disabled:!t.valid,color:"primary"},on:{click:t.nextStep}},[t._v("Continue")])],1):t._e(),a("v-stepper-step",{attrs:{step:"4",complete:t.currentStep>4}},[a("span",{staticClass:"stepper-header",on:{click:function(e){t.currentStep=4}}},[t._v("Beverages & Medicine")])]),4==t.currentStep?a("v-stepper-content",{attrs:{step:"4"}},[a("div",{staticClass:"row"},[a("v-select",{attrs:{label:"How many drinks containing alcohol did you have?",items:t.numbersList,rules:t.requiredRule},model:{value:t.form.alcoholNum,callback:function(e){t.$set(t.form,"alcoholNum",e)},expression:"form.alcoholNum"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("How many drinks containing alcohol did you have?")])],1)],1),t.form.alcoholNum>0?a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"What time was your last alcoholic drink?",rules:t.requiredRule,type:"time",hint:"hh:mm am|pm"},model:{value:t.form.alcoholTime,callback:function(e){t.$set(t.form,"alcoholTime",e)},expression:"form.alcoholTime"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("What time was your last alcoholic drink?")])],1)],1):t._e(),a("div",{staticClass:"row"},[a("v-select",{attrs:{label:"How many caffeinated drinks (coffee, tea, soda, energy drinks) did you have?",items:t.numbersList,rules:t.requiredRule},model:{value:t.form.caffeinatedNum,callback:function(e){t.$set(t.form,"caffeinatedNum",e)},expression:"form.caffeinatedNum"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("How many caffeinated drinks (coffee, tea, soda, energy drinks) did you have?")])],1)],1),t.form.caffeinatedNum>0?a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:"What time was your last caffeinated drink?",rules:t.requiredRule,type:"time",hint:"hh:mm am|pm"},model:{value:t.form.caffeinatedTime,callback:function(e){t.$set(t.form,"caffeinatedTime",e)},expression:"form.caffeinatedTime"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("What time was your last caffeinated drink?")])],1)],1):t._e(),a("div",{staticClass:"row"},[a("v-checkbox",{attrs:{label:"Did you take any over-the-counter or prescription medication(s) to help you sleep?",color:"primary"},model:{value:t.form.otcMed,callback:function(e){t.$set(t.form,"otcMed",e)},expression:"form.otcMed"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("Did you take any over-the-counter or prescription medication(s) to help you sleep?")])],1)],1),t._l(t.form.medicines,function(e,r){return t.form.otcMed&&t.form.medicines?a("div",{key:r,staticClass:"row"},[a("v-text-field",{attrs:{label:"Medication, dose, and time taken e.g. Relaxo-Herb, 50 mg, 11 pm"},model:{value:t.form.medicines[r],callback:function(e){t.$set(t.form.medicines,r,e)},expression:"form.medicines[index]"}}),a("v-tooltip",{staticClass:"ml-2",attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("info")]),a("span",[t._v("Medication, dose, and time taken e.g. Relaxo-Herb, 50 mg, 11 pm")])],1)],1):t._e()}),t.form.otcMed?a("v-btn",{staticClass:"btn-spaced",on:{click:t.addMedicine}},[a("v-icon",[t._v("add")]),t._v("\n                  Add Medicine\n                ")],1):t._e(),a("v-textarea",{attrs:{label:"Comments (if applicable)"},model:{value:t.form.comments,callback:function(e){t.$set(t.form,"comments",e)},expression:"form.comments"}}),a("v-btn",{staticClass:"btn-spaced",attrs:{disabled:!t.valid,type:"submit",loading:t.loading,color:"primary"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("Submit")])],2):t._e()],1)],1)],1)],1):t._e()],1)],1)};r._withStripped=!0;var o={render:r,staticRenderFns:[]};e.a=o},wFZK:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".stepper-header[data-v-4d1596d4]:hover{cursor:pointer}.btn-spaced[data-v-4d1596d4]{margin-left:0;margin-top:20px}.row[data-v-4d1596d4]{display:-webkit-box;display:-ms-flexbox;display:flex}.without-ampm[data-v-4d1596d4]::-webkit-datetime-edit-ampm-field{display:none}",""])}});